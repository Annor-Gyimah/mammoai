{% extends 'partials/dashboard_base.html' %}
{% load static %}
{% block content %}

<nav>
    <i class="fa fa-bars"></i>
    {% include 'partials/search_bar.html' %}
    <a href="" class="notification">
        <i class="fa fa-bell"></i>
        <span class="num">{{total_noti}}</span>
    </a>
    <a href="#" class="profile">
        <img src="{% static 'assets/image/profile.jpg' %}" alt="">
    </a>
    <div class="profile-cont hidden" id="profile-cont">
        <div class="user-profile">
            <img src="{% static 'assets/image/profile.jpg' %}" alt="">
            <span><i class="fa fa-user"></i> Username</span>
            <span><i class="fa fa-envelope"></i> usejjkjdjfkjkdkfjkjr@mail.com</span>
            <a href="{% url 'userauths:profile' %}"><i class="fa fa-cog"></i> Settings</a>
            <a href="#"><i class="fa fa-arrow-left"></i> Sign Out</a>
        </div>
    </div>
</nav>
<section id="sidebar">
    <a href="{% url 'user_dashboard:dashboard' %}" class="brand">
        <img src="{% static 'assets/image/logo.png' %}" alt="logo">
        <!-- <i class="fa fa-hospital-o"></i> -->
        <span class="text">MammoAi</span>
    </a>
    <ul class="side-menu top">
        <li>
            <a href="{% url 'user_dashboard:dashboard' %}">
                <i class="fa fa-dashboard"></i>
                <span class="text">Dashboard</span>
            </a>
        </li>
        <li>
            <a href="{% url 'user_dashboard:records' %}">
                <i class="fa fa-folder"></i>
                <span class="text">Records</span>
            </a>
        </li>
        <li class="active">
            <a href="{% url 'user_dashboard:add_patient' %}">
                <i class="fa fa-plus-circle"></i>
                <span class="text">Add Patient</span>
            </a>
        </li>
        
        <!-- <li>
            <a href="#">
                <i class="fa fa-exclamation-circle"></i>
                <span class="text">Help</span>
            </a>
        </li>
        <li>
            <a href="#">
                <i class="fa fa-group"></i>
                <span class="text">Team</span>
            </a>
        </li> -->
    </ul>
    <ul class="side-menu">
        <li>
            <a href="{% url 'userauths:profile' %}">
                <i class="fa fa-user"></i>
                <span class="text">Edit Profile</span>
            </a>
        </li>
        <li>
            <a href="{% url 'userauths:password_change' %}">
                <i class="fa fa-cog"></i>
                <span class="text">Settings</span>
            </a>
        </li>
        <li>
            <a href="{% url 'userauths:sign-out' %}"  class="logout">
                <i class="fa fa-arrow-left"></i>
                <span class="text">Logout</span>
            </a>
        </li>
    </ul>
</section>
<main>
    <div class="head-title">
        <div class="left">
            <h1>Records</h1>
            <ul class="breadcrumb">
                <li>
                    <a href="">Dashboard</a>
                </li>
                <li><i class="fa fa-chevron-right"></i></li>
                <li>
                    <a href="" class="active">Add Records</a>
                </li>
            </ul>
        </div>
        
    </div>

    <!-- <ul class="box-info">
        <li>
            <i class="fa fa-calendar"></i>
            <span class="text">
                <h3>Welcome Radiologist</h3>
                <p>June 20, 2024</p>
            </span>
        </li>
        <li>
            <i class="fa fa-group"></i>
            <span class="text">
                <h3>2834</h3>
                <p>Visitors</p>
            </span>
        </li>
        <li>
            <i class="fa fa-dollar"></i>
            <span class="text">
                <h3>$2543</h3>
                <p>Total Sales</p>
            </span>
        </li>
    </ul> -->

    <div class="table-data">
        <div class="record">
            <div class="head">
                <h3><i class="fa fa-user"></i> ID: {{form.pid.value}}</h3>
                <!-- <i class="fa fa-search"></i>
                <i class="fa fa-filter"></i> -->
            </div>
            <div class='head'></div>
            <form action="" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <fieldset>
                    <legend>Personal Details</legend>
                    <div class="fieldset">
                        <div class="field">
                            <label for="fname">Firstname</label>
                            {{ form.firstname }}
                        </div>
                        <div class="field">
                            <label for="lname">Lastname</label>
                            {{ form.lastname }}
                        </div>
                        <div class="field">
                            <label for="age">Age</label>
                            {{ form.age }}
                        </div>
                        
                    </div>
                    <div class="fieldset">
                        <div class="field gender">
                            <label for="gender">Gender</label>
                            {{ form.gender }}
                        </div>
                    </div>
                    <div class="fieldset">
                        <div class="field">
                            <label for="address">Address</label>
                            {{ form.address }}
                        </div>
                        <div class="field">
                            <label for="phone">Mobile</label>
                            {{ form.phone }}
                        </div>
                        <div class="field">
                            <label for="occupation">Occupation</label>
                            {{ form.occupation }}
                        </div>
                    </div>
                </fieldset>
                <fieldset class="health-info">
                    <legend>Breast History Info</legend>
                    <div class="fieldset">
                        <div class="field">
                            <label for="fname">Age Group 5 Years</label>
                            {{ form.age_group_5_years }}
                        </div>
                        <div class="field">
                            <label for="fname">First Degree Hx</label>
                            {{ form.first_degree_hx }}
                        </div>
                        <div class="field">
                            <label for="lname">Age Menarche</label>
                            {{ form.age_menarche }}
                        </div>
                        <div class="field">
                            <label for="age">Age First Birth</label>
                            {{ form.age_first_birth }}
                        </div>
                        
                    </div>
                    <div class="fieldset">
                        <div class="field gender">
                            <label for="gender">Birads Breast Density</label>
                            {{ form.birads_breast_density }}
                        </div>
                        <div class="field">
                            <label for="address">Breast Cancer History</label>
                            {{ form.breast_cancer_history }}
                        </div>
                        <div class="field">
                            <label for="phone">Current Hrt</label>
                            {{ form.current_hrt }}
                        </div>
                        
                        
                        
                    </div>
                    <div class="fieldset">
                        <div class="field">
                            <label for="phone">Menopause</label>
                            {{ form.menopaus }}
                        </div>
                        <div class="field">
                            <label for="phone">BMI Group</label>
                            {{ form.bmi_group }}
                        </div>
                        <div class="field">
                            <label for="phone">Biophx</label>
                            {{ form.biophx }}
                        </div>
                        

                    </div>
                    
                </fieldset>
                <fieldset class="health-info">
                    <legend>Mammogram Image Upload</legend>
                    <div class="fieldset">
                        <div class="field">
                            <label for="mammogram_image">Mammogram Image</label>
                            {{form.mammogram_image}}
                            <!-- <input type="file" name="filePath" class="upload_img" onchange="loadImg(event)"> -->
                            <img id="mammogram_image_preview" alt="Mammogram Image Preview" style="display:none; width: 260px; height: 260px;"/>
                            

                            {% if record.mammogram_image %}
                                <img src="{{ record.mammogram_image.url }}" alt="Mammogram Image" style="width: 260px; height: 260px; display: block;"/>
                            {% endif %}
                        </div>
                        
                    </div>

                </fieldset>
                <div class="submit-form">
                    <button type="submit"><i class="fa fa-save"></i> Save Progress</button>
                </div>
            </form>
        </div>
    </div>
</main>
<script>
    let loadImg = function(event){
        let output = document.getElementById("mammogram_image_preview");
        output.src = URL.createObjectURL(event.target.files[0]);
        output.style.display = 'block';
        output.onload = function(){
            URL.revokeObjectURL(output.src);
        }
    }

    let loadFile = function(event){
        let output = document.getElementById("risk_assessment_form_preview");
        output.src = URL.createObjectURL(event.target.files[0]);
        output.style.display = 'block';
        output.onload = function(){
            URL.revokeObjectURL(output.src);
        }
    }
</script>



{% endblock %}
        